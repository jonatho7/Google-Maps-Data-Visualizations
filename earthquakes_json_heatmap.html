<!DOCTYPE html>
<html>
<head>
    <style>
        html, body, #map-canvas {
            margin: 0;
            padding: 0;
            height: 100%;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>

    <script
            src="https://maps.googleapis.com/maps/api/js?libraries=geometry,visualization">
    </script>

    <script src="jsonData.js"></script>

    <script>
        var map;

        function initialize() {
            var mapOptions = {
                zoom: 2,
                center: {lat: -33.865427, lng: 151.196123},
                mapTypeId: google.maps.MapTypeId.TERRAIN
            };
            map = new google.maps.Map(document.getElementById('map-canvas'),
                    mapOptions);



            //Load the json data.
            //map.data.addGeoJson(earthquakeJSON);

            var heatmapData = [];
            for (var i = 0; i < earthquakeJSON.features.length; i++) {
                var coords = earthquakeJSON.features[i].geometry.coordinates;
                var latLng = new google.maps.LatLng(coords[1], coords[0]);
                var magnitude = earthquakeJSON.features[i].properties.mag;
                var weightedLoc = {
                    location: latLng,
                    weight: Math.pow(2, magnitude)
                };
                heatmapData.push(weightedLoc);
            }
            var heatmap = new google.maps.visualization.HeatmapLayer({
                data: heatmapData,
                dissipating: false,
                map: map
            });


        }

        // Call the initialize function after the page has finished loading
        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>
<body>
<div id="map-canvas"></div>
</body>
</html>